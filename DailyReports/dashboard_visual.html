<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‡‘æ˜ - ä¸“ä¸šå¥åº·æ•°æ®å¯è§†åŒ–çœ‹æ¿</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        .header {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            text-align: center;
        }
        .header h1 {
            font-size: 2.5em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        .header p {
            color: #666;
            font-size: 1.1em;
        }
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
        }
        .card-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 20px;
            color: #667eea;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }
        .stat-row {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }
        .stat-item {
            text-align: center;
        }
        .stat-value {
            font-size: 3em;
            font-weight: bold;
            color: #667eea;
        }
        .stat-label {
            color: #666;
            font-size: 1em;
            margin-top: 5px;
        }
        .chart-container {
            position: relative;
            height: 350px;
        }
        .full-width {
            grid-column: 1 / -1;
        }
        .gauge-container {
            position: relative;
            text-align: center;
            padding: 20px;
        }
        .gauge-value {
            font-size: 5em;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .gauge-label {
            color: #666;
            font-size: 1.2em;
            margin-top: 10px;
        }
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #f0f0f0;
            border-radius: 15px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transition: width 1s ease;
        }
        .recommendation {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
        }
        .recommendation-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 8px;
        }
        .update-time {
            text-align: center;
            color: white;
            padding: 15px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸŠ é‡‘æ˜ - ä¸“ä¸šå¥åº·æ•°æ®å¯è§†åŒ–çœ‹æ¿</h1>
            <p>è‡ªç”±æ½œæ°´ä¸–ç•Œçºªå½•ä¿æŒè€… | <span id="current-date"></span></p>
        </div>

        <!-- å‡†å¤‡åº¦ä»ªè¡¨ç›˜ -->
        <div class="card">
            <div class="card-title">ğŸ¯ ä»Šæ—¥è®­ç»ƒå‡†å¤‡åº¦</div>
            <div class="gauge-container">
                <div class="gauge-value" id="readiness-score">--</div>
                <div class="gauge-label" id="readiness-status">åŠ è½½ä¸­...</div>
            </div>
            <div style="margin-top: 20px;">
                <div class="progress-bar">
                    <div class="progress-fill" id="readiness-bar" style="width: 0%">0%</div>
                </div>
            </div>
            <div class="recommendation">
                <div class="recommendation-title">ğŸ’¡ å»ºè®®ï¼š</div>
                <div id="readiness-recommendation">æ­£åœ¨åˆ†ææ•°æ®...</div>
            </div>
        </div>

        <div class="dashboard-grid">
            <!-- é›·è¾¾å›¾ -->
            <div class="card">
                <div class="card-title">ğŸ“Š å¥åº·æŒ‡æ ‡é›·è¾¾å›¾</div>
                <div class="chart-container">
                    <canvas id="radarChart"></canvas>
                </div>
            </div>

            <!-- ç¡çœ è´¨é‡ -->
            <div class="card">
                <div class="card-title">ğŸ˜´ ç¡çœ è´¨é‡åˆ†æ</div>
                <div class="chart-container">
                    <canvas id="sleepChart"></canvas>
                </div>
            </div>

            <!-- HRVåˆ†æ -->
            <div class="card">
                <div class="card-title">ğŸ’“ HRVæ·±åº¦åˆ†æ</div>
                <div style="padding: 20px;">
                    <div class="stat-row">
                        <div class="stat-item">
                            <div class="stat-value" id="hrv-value">--</div>
                            <div class="stat-label">HRVè¯„åˆ†</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="hrv-zone">--</div>
                            <div class="stat-label">çŠ¶æ€åŒºé—´</div>
                        </div>
                    </div>
                    <div class="chart-container" style="height: 250px;">
                        <canvas id="hrvTrendChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- æ´»åŠ¨åˆ†å¸ƒ -->
            <div class="card">
                <div class="card-title">ğŸƒ æ´»åŠ¨åˆ†å¸ƒ</div>
                <div class="chart-container">
                    <canvas id="activityChart"></canvas>
                </div>
            </div>
        </div>

        <!-- å‘¨è¶‹åŠ¿ -->
        <div class="card full-width">
            <div class="card-title">ğŸ“ˆ 7æ—¥è¶‹åŠ¿å›¾</div>
            <div class="chart-container">
                <canvas id="trendChart" style="height: 300px;"></canvas>
            </div>
        </div>

        <!-- è¯¦ç»†æ•°æ® -->
        <div class="card full-width">
            <div class="card-title">ğŸ“‹ è¯¦ç»†å¥åº·æ•°æ®</div>
            <div id="detailed-data">
                <p>æ­£åœ¨åŠ è½½...</p>
            </div>
        </div>

        <div class="update-time">
            æ•°æ®æ¥æºï¼šOura Ring + Open-Meteo + WAQI + 8Sleep<br>
            æ›´æ–°æ—¶é—´ï¼š<span id="update-time"></span> | è‡ªåŠ¨åˆ·æ–°ï¼š5åˆ†é’Ÿ
        </div>
    </div>

    <script>
        // å¥åº·æ•°æ®
        const healthData = {
            readiness: {
                score: 86,
                status: "ğŸ”¥ æœ€ä½³çŠ¶æ€",
                recommendation: "ä»Šæ—¥æ˜¯æŒ‘æˆ˜ä¸ªäººè®°å½•çš„å¥½æ—¶æœºï¼ä½ çš„çŠ¶æ€æ¥è¿‘åˆ›é€ 7.6Lè‚ºæ´»é‡PBæ—¶çš„æ°´å¹³",
                color: "#10b981"
            },
            contributors: {
                hrv_balance: 86,
                recovery_index: 100,
                resting_heart_rate: 89,
                sleep_balance: 97,
                activity_balance: 79
            },
            sleep: {
                score: 70,
                total: 71,
                deep: 74,
                rem: 76,
                efficiency: 96,
                latency: 72,
                restfulness: 74,
                timing: 23
            },
            hrv: {
                current: 86,
                zone: "æä½³æ¢å¤",
                trend: "ä¸Šå‡"
            }
        };

        // æ›´æ–°æ—¥æœŸ
        document.getElementById('current-date').textContent = new Date().toLocaleDateString('zh-CN', {
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            weekday: 'long'
        });

        // æ›´æ–°å‡†å¤‡åº¦
        document.getElementById('readiness-score').textContent = healthData.readiness.score;
        document.getElementById('readiness-status').textContent = healthData.readiness.status;
        document.getElementById('readiness-recommendation').textContent = healthData.readiness.recommendation;
        document.getElementById('readiness-bar').style.width = healthData.readiness.score + '%';
        document.getElementById('readiness-bar').textContent = healthData.readiness.score + '%';

        // HRVæ•°æ®
        document.getElementById('hrv-value').textContent = healthData.hrv.current;
        document.getElementById('hrv-zone').textContent = healthData.hrv.zone;

        // åˆ›å»ºé›·è¾¾å›¾
        const radarCtx = document.getElementById('radarChart').getContext('2d');
        new Chart(radarCtx, {
            type: 'radar',
            data: {
                labels: ['HRVå¹³è¡¡', 'æ¢å¤æŒ‡æ•°', 'é™æ¯å¿ƒç‡', 'ç¡çœ å¹³è¡¡', 'æ´»åŠ¨å¹³è¡¡'],
                datasets: [{
                    label: 'å½“å‰çŠ¶æ€',
                    data: [
                        healthData.contributors.hrv_balance,
                        healthData.contributors.recovery_index,
                        healthData.contributors.resting_heart_rate,
                        healthData.contributors.sleep_balance,
                        healthData.contributors.activity_balance
                    ],
                    backgroundColor: 'rgba(102, 126, 234, 0.2)',
                    borderColor: 'rgb(102, 126, 234)',
                    pointBackgroundColor: 'rgb(102, 126, 234)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgb(102, 126, 234)'
                }, {
                    label: 'ä¼˜ç§€æ°´å¹³',
                    data: [85, 85, 85, 85, 85],
                    backgroundColor: 'rgba(75, 192, 192, 0.1)',
                    borderColor: 'rgba(75, 192, 192, 0.5)',
                    borderDash: [5, 5],
                    pointRadius: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: { color: 'rgba(0, 0, 0, 0.1)' },
                        grid: { color: 'rgba(0, 0, 0, 0.1)' },
                        pointLabels: {
                            font: { size: 13 },
                            color: '#333'
                        },
                        ticks: {
                            backdropColor: 'rgba(255, 255, 255, 0.75)',
                            color: '#666'
                        },
                        suggestedMin: 0,
                        suggestedMax: 100
                    }
                },
                plugins: {
                    legend: {
                        position: 'top',
                    }
                }
            }
        });

        // åˆ›å»ºç¡çœ è´¨é‡æŸ±çŠ¶å›¾
        const sleepCtx = document.getElementById('sleepChart').getContext('2d');
        new Chart(sleepCtx, {
            type: 'bar',
            data: {
                labels: ['æ€»ç¡çœ ', 'æ·±ç¡', 'REM', 'æ•ˆç‡', 'å…¥ç¡', 'å®‰äº«åº¦', 'è§„å¾‹'],
                datasets: [{
                    label: 'ç¡çœ è¯„åˆ†',
                    data: [
                        healthData.sleep.total,
                        healthData.sleep.deep,
                        healthData.sleep.rem,
                        healthData.sleep.efficiency,
                        healthData.sleep.latency,
                        healthData.sleep.restfulness,
                        healthData.sleep.timing
                    ],
                    backgroundColor: [
                        'rgba(102, 126, 234, 0.8)',
                        'rgba(139, 92, 246, 0.8)',
                        'rgba(59, 130, 246, 0.8)',
                        'rgba(16, 185, 129, 0.8)',
                        'rgba(245, 158, 11, 0.8)',
                        'rgba(251, 146, 60, 0.8)',
                        'rgba(214, 51, 132, 0.8)'
                    ]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        ticks: { color: '#666' }
                    },
                    x: {
                        ticks: { color: '#333', font: { size: 11 } }
                    }
                },
                plugins: {
                    legend: { display: false }
                }
            }
        });

        // åˆ›å»ºæ´»åŠ¨åˆ†å¸ƒé¥¼å›¾
        const activityCtx = document.getElementById('activityChart').getContext('2d');
        new Chart(activityCtx, {
            type: 'doughnut',
            data: {
                labels: ['é«˜æ´»åŠ¨', 'ä¸­ç­‰æ´»åŠ¨', 'ä½æ´»åŠ¨', 'ä¼‘æ¯/ç¡çœ '],
                datasets: [{
                    data: [35, 25, 20, 20],
                    backgroundColor: [
                        'rgba(102, 126, 234, 0.8)',
                        'rgba(118, 75, 162, 0.8)',
                        'rgba(240, 147, 251, 0.8)',
                        'rgba(245, 87, 108, 0.8)'
                    ]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });

        // HRVè¶‹åŠ¿å›¾ï¼ˆæ¨¡æ‹Ÿ7å¤©æ•°æ®ï¼‰
        const hrvCtx = document.getElementById('hrvTrendChart').getContext('2d');
        new Chart(hrvCtx, {
            type: 'line',
            data: {
                labels: ['å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'ä»Šå¤©'],
                datasets: [{
                    label: 'HRVè¯„åˆ†',
                    data: [72, 78, 82, 75, 88, 84, 86],
                    borderColor: 'rgb(102, 126, 234)',
                    backgroundColor: 'rgba(102, 126, 234, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        min: 50,
                        max: 100,
                        ticks: { color: '#666' }
                    },
                    x: {
                        ticks: { color: '#333' }
                    }
                },
                plugins: {
                    legend: { display: false }
                }
            }
        });

        // 7æ—¥è¶‹åŠ¿å›¾
        const trendCtx = document.getElementById('trendChart').getContext('2d');
        new Chart(trendCtx, {
            type: 'line',
            data: {
                labels: ['å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'ä»Šå¤©'],
                datasets: [{
                    label: 'å‡†å¤‡åº¦',
                    data: [72, 78, 85, 82, 88, 84, 86],
                    borderColor: '#667eea',
                    backgroundColor: 'rgba(102, 126, 234, 0.1)',
                    tension: 0.4,
                    fill: true
                }, {
                    label: 'ç¡çœ åˆ†æ•°',
                    data: [68, 75, 82, 70, 78, 72, 70],
                    borderColor: '#8b5cf6',
                    backgroundColor: 'rgba(139, 92, 246, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        min: 50,
                        max: 100,
                        ticks: { color: '#666' }
                    },
                    x: {
                        ticks: { color: '#333' }
                    }
                },
                plugins: {
                    legend: {
                        position: 'top'
                    }
                }
            }
        });

        // æ›´æ–°è¯¦ç»†æ•°æ®
        document.getElementById('detailed-data').innerHTML = `
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                <div style="padding: 15px; background: #f8f9fa; border-radius: 10px;">
                    <div style="font-size: 2em; font-weight: bold; color: #667eea;">86</div>
                    <div style="color: #666; margin-top: 5px;">å‡†å¤‡åº¦åˆ†æ•°</div>
                </div>
                <div style="padding: 15px; background: #f8f9fa; border-radius: 10px;">
                    <div style="font-size: 2em; font-weight: bold; color: #10b981;">100</div>
                    <div style="color: #666; margin-top: 5px;">æ¢å¤æŒ‡æ•°</div>
                </div>
                <div style="padding: 15px; background: #f8f9fa; border-radius: 10px;">
                    <div style="font-size: 2em; font-weight: bold; color: #8b5cf6;">97</div>
                    <div style="color: #666; margin-top: 5px;">ç¡çœ å¹³è¡¡</div>
                </div>
                <div style="padding: 15px; background: #f8f9fa; border-radius: 10px;">
                    <div style="font-size: 2em; font-weight: bold; color: #f59e0b;">86</div>
                    <div style="color: #666; margin-top: 5px;">HRVå¹³è¡¡</div>
                </div>
                <div style="padding: 15px; background: #f8f9fa; border-radius: 10px;">
                    <div style="font-size: 2em; font-weight: bold; color: #667eea;">79</div>
                    <div style="color: #666; margin-top: 5px;">æ´»åŠ¨å¹³è¡¡</div>
                </div>
                <div style="padding: 15px; background: #f8f9fa; border-radius: 10px;">
                    <div style="font-size: 2em; font-weight: bold; color: #10b981;">70</div>
                    <div style="color: #666; margin-top: 5px;">ç¡çœ æ€»åˆ†</div>
                </div>
            </div>
        `;

        // æ›´æ–°æ—¶é—´
        document.getElementById('update-time').textContent = new Date().toLocaleString('zh-CN');

        // è‡ªåŠ¨åˆ·æ–°ï¼ˆ5åˆ†é’Ÿï¼‰
        setTimeout(function() {
            location.reload();
        }, 300000);
    </script>
</body>
</html>
