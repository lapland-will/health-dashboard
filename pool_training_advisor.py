#!/usr/bin/env python3
"""
金明 - 两餐制饮食顾问
专注于自由潜水运动员的两餐营养方案
"""

from datetime import datetime

class TwoMealDietAdvisor:
    """两餐制饮食顾问"""

    def __init__(self):
        self.user_profile = {
            "name": "金明",
            "weight_kg": 65.5,
            "height_cm": 170,
            "activity_level": "高强度泳池训练",
            "goals": ["无蹼", "单蹼", "双蹼", "静态闭气", "1000米蛙泳"]
        }

    def generate_two_meal_plan(self, readiness_score, training_intensity, weather_temp):
        """生成两餐饮食计划"""

        # 根据训练强度调整热量
        if training_intensity == "high":
            total_calories = 3000
        elif training_intensity == "medium":
            total_calories = 2600
        else:  # recovery
            total_calories = 2200

        # 营养分配
        protein_ratio = 0.30  # 高蛋白支持肌肉
        fat_ratio = 0.35      # 优质脂肪
        carb_ratio = 0.35     # 复合碳水

        md = f"""## 🍽️ 今日两餐饮食计划

**总热量需求：** {total_calories} kcal
**营养分配：** 蛋白质{int(protein_ratio*100)}% | 脂肪{int(fat_ratio*100)}% | 碳水{int(carb_ratio*100)}%

---

### 🍳 第一餐（午餐 12:30）

**热量目标：** {int(total_calories*0.45)} kcal

#### 📋 餐单详情

**主菜：**
- **深海鱼类**（三文鱼/鲭鱼/金枪鱼）200g
  - 烹饪方式：蒸、烤或少油煎
  - 营养价值：优质蛋白质、Omega-3脂肪酸

- **复合碳水**（选择1-2种）：
  - 糙米/藜麦/野米饭 150g（煮熟）
  - 红薯/紫薯 200g（蒸/烤）
  - 全麦面包 2片

- **蔬菜**（大量）：
  - 西兰花/菠菜/小白菜 200g
  - 烹饪方式：水煮或蒜蓉炒
  - 营养价值：维生素、矿物质、抗氧化剂

**优质脂肪来源：**
- 牛油果 半个 或 橄榄油 1汤匙
- 坚果 30g（核桃/杏仁）

#### 🧪 营养元素分析

| 营养元素 | 含量 | 作用 |
|---------|------|------|
| 优质蛋白质 | ~60g | 肌肉修复、肌肉合成 |
| Omega-3 | ~3g | 抗炎、心血管健康 |
| 复合碳水 | ~150g | 持久训练能量 |
| 膳食纤维 | ~10g | 消化健康、饱腹感 |
| 维生素C | ~80mg | 抗氧化、铁吸收 |
| 钾 | ~400mg | 肌肉收缩、骨骼健康 |
| 镁 | ~120mg | 蛋白质合成、代谢 |

#### 💡 第一餐补剂
- ☑ NMN22000 1粒（早晨空腹，如果未服用）
- ☑ 益生菌 1粒（空腹）
- ☑ 鱼油 2粒（随餐）

**时间建议：** 12:30-13:30
**餐后活动：** 休息30-60分钟后进行下午训练

---

### 🍽️ 第二餐（晚餐 18:30-19:00）

**热量目标：** {int(total_calories*0.40)} kcal

#### 📋 餐单详情

**主菜：**
- **瘦肉类**（选择1-2种）：
  - 瘦牛肉/牛腱 180g
  - 鸡胸肉/去皮鸡腿肉 200g
  - 三文鱼/其他白鱼 200g
  - 烹饪方式：清蒸、红烧（少油）、烤

- **复合碳水**（选择1种）：
  - 红薯/南瓜 200g
  - 杂粮/藜麦 150g
  - 全麦意面 200g（熟重）

- **蔬菜沙拉**：
  - 混合生菜/黄瓜/番茄 300g
  - 调味：橄榄油 + 柠檬汁 + 少量香草
  - 避免：高热量酱汁、过多调味品

#### 🧪 营养元素分析

| 营养元素 | 含量 | 作用 |
|---------|------|------|
| 优质蛋白质 | ~50g | 肌肉修复、夜间恢复 |
| 支链氨基酸 | ~8g | 肌肉合成、修复 |
| 复合碳水 | ~150g | 恢复糖原、次日训练准备 |
| 膳食纤维 | ~12g | 消化健康、饱腹感 |
| 维生素A | ~400RE | 夜视能力（需避与异维A酸冲突）|
| 锌 | ~15mg | 免疫支持、代谢 |
| 硒 | ~12mg | 肌肉放松、睡眠质量 |

#### 💡 第二餐补剂
- ☑ 维生素D3 2粒（随餐）
- ☑ 镁 2粒（睡前30分钟服用）

**时间建议：** 18:30-19:30
**睡前2小时完成：** 避免影响睡眠质量

---

## 🕐 时间安排建议

### 训练日时间表
```
07:00  起床 + NMN22000 + 益生菌
07:30  轻度活动或休息
08:00  早餐（轻食，可选）
10:00  训练前加餐（香蕉1根 + MCT油15ml）
10:30  泳池训练开始
- 无蹼/单蹼/双蹼训练
- 静态闭气练习
- 1000米蛙泳训练
12:30  第一餐（午餐）
13:30  休息/恢复
14:00  技术训练或体能训练
15:00  下午训练或休息
18:30  第二餐（晚餐）
20:00  睡前准备（避免蓝光）
21:30  入睡

### 休息日时间表
```
07:00  起床 + NMN22000 + 益生菌
08:00  早餐（鸡蛋2个 + 全麦面包1片 + 坚果20g）
11:00  加餐（水果/酸奶）
12:30  第一餐（类似训练日午餐，但量减少20%）
16:00  加餐（坚果/水果）
18:30  第二餐（类似训练日晚餐，但更清淡）
```

---

## 🧪 每餐营养元素详细说明

### 优质蛋白质来源

**动物蛋白（每100g含量）：**
- 三文鱼：26g蛋白质 + 18g Omega-3
- 鸡胸肉：31g蛋白质 + 低脂
- 瘦牛肉：26g蛋白质 + 铁、锌
- 金枪鱼：29g蛋白质 + 15g Omega-3
- 鸡蛋：13g蛋白质 + 完整氨基酸谱

**植物蛋白（适量添加）：**
- 豆类（豆腐、豆制品）
- 坚果（核桃、杏仁、腰果）
- 种子（奇亚籽、亚麻籽）

### 优质脂肪来源

**Omega-3来源（抗炎、心血管）：**
- 深海鱼（三文鱼、鲭鱼、金枪鱼）
- 鱼油补充剂
- 核桃、亚麻籽

**单不饱和脂肪来源：**
- 牛油果
- 橄榄油
- 坚果

### 复合碳水化合物来源

**低GI（低升糖指数，持久供能）：**
- 红薯、紫薯
- 糙米、藜麦、燕麦
- 全麦面包、意面
- 甜土豆

**高GI（快速供能）：**
- 白米饭（训练后可食用）
- 白面包（训练后可食用）

### 蔬菜水果

**抗氧化蔬果（高维生素C）：**
- 西兰花、菠菜、小白菜
- 番茄、胡萝卜、彩椒
- 柑檬、橙子、猕猴桃

**抗氧化水果：**
- 蓝莓、草莓、黑莓
- 葡萄、石榴

---

## ⚠️ 注意事项

### 因异维A酸需避免
- ❌ 动物肝脏
- ❌ 维生素A补充剂
- ❌ 胡萝卜素补充剂

### 训练日特别注意
- **训练前2小时：** 完成第一餐，充分消化
- **训练前30分钟：** 轻食（香蕉+MCT油）
- **训练后30分钟：** 蛋白质 + 快速碳水
- **晚间：** 避免过多脂肪，影响睡眠

### 根据训练强度调整

**高强度训练日：**
- 增加蛋白质到 120g（总计）
- 增加复合碳水到 200g
- 训练后额外补充

**恢复日：**
- 减少总热量 15-20%
- 重点增加抗氧化食物
- 增加休息和睡眠时间

---

*本方案基于：*
- *自由潜水运动员营养需求*
- *运动营养学会（ISSN）指南*
- *个人训练记录分析*
- *异维A酸用药注意事项*
"""

        return md

    def generate_supplement_checklist(self):
        """生成补剂检查清单"""

        md = """## 💊 今日补剂检查清单

### ✅ 早晨空腹（7:00）
- [ ] NMN22000 1粒
- [ ] 益生菌 1粒

### ✅ 随餐（随餐）
- [ ] 鱼油 2粒（午餐后）
- [ ] 维生素D3 2粒（午餐后）

### ✅ 傌前/训练后
- [ ] BCAA 5-10g（训练中，可选）
- [ ] 电解质（训练超过1小时）
- [ ] 蛋白粉 30g（训练后30分钟内）

### ✅ 睡前（睡前30分钟）
- [ ] 镁 2粒（400mg）
- [ ] 锌 15mg（如果需要）

### ✅ 隔日服药日
- [ ] 异维A酸 10mg（偶数日：2、4、6、...30日）

---

## 📊 每日检查清单生成器（当天）

### 早晨（训练前）
- [ ] 7:00 - NMN22000 + 益生菌
- [ ] 检查今日训练计划
- [ ] 准备训练装备（表带、耳机等）
- [ ] 训练前加餐准备（香蕉 + MCT油）

### 训练期间
- [ ] 每25分钟检查心率（保持目标心率）
- [ ] 补充水分（每15分钟250ml）
- [ ] 记录训练感受
- [ ] 监控恢复状态

### 训练后
- [ ] 30分钟内补充蛋白质 + 空水合物
- [ ] 拉伸放松10-15分钟
- [ ] 记录训练数据

### 晚间
- [ ] 20:00前停止进食
- [ ] 避免蓝光（手机、电脑）
- [ ] 镁 2粒 + 维生素D3 2粒
- [ ] 21:30 准备入睡

---

*两餐制饮食方案适合：*
- *间歇训练日*
- *技术训练日*
- *恢复日*
- *异维A酸服用期间*
"""

        return md


class PoolTrainingAdvisor:
    """泳池训练顾问"""

    def __init__(self):
        self.today = datetime.now()
        self.training_records = {
            "lung_capacity_pb": {
                "value": 7653,  # ml
                "date": "2024.5.27",
                "note": "PB个人最好"
            },
            "swimming_1000m_pb": {
                "time": "17:56",
                "date": "2025.9.25",
                "pace": "1:47/100m",
                "note": "PB最好成绩"
            },
            "recent_performance": {
                "improvement_2024": "从21分7秒提升到17分56秒（15%进步）",
                "issue_2025_022": "休息3周后严重退步",
                "recovery_2025_09": "持续训练到9月25日创造PB"
            }
        }

    def analyze_pool_training_data(self):
        """分析泳池训练数据"""
        insights = []

        # 游泳成绩分析
        insights.append({
            "title": "1000米蛙泳训练建议",
            "analysis": """
**成绩历史：**
- PB成绩：17分56秒（2025.9.25）
- 配速：1:47/100m
- 进步趋势：从21分7秒提升到17分56秒（2024.8-2025.9）

**关键发现：**
1. 持续训练是关键 - 2025.2.2休息3周后严重退步
2. 细节很重要 - "表带带紧、耳机音量刚好"可影响成绩
3. 配速稳定 - 最优配速1:47-1:50/100m
4. 心率控制 - 平均心率145-150bpm
            """,
            "recommendations": [
                "✓ 保持每周至少3-4次1000米蛙泳训练",
                "✓ 使用稳定配速1:47-1:50/100m",
                "✓ 监控心率在目标区间（140-160bpm）",
                "✓ 训练前充分热身（200米自由泳）",
                "✓ 注意装备检查（表带、耳机、泳镜等）"
            ]
        })

        # 肺活量与游泳表现
        insights.append({
            "title": "肺活量与游泳表现关联",
            "analysis": """
**数据关联：**
- PB肺活量：7,653ml（2024.5.27）
- 该日游泳成绩接近最佳

**建议：**
- 肺活量高时（≥7000ml），游泳表现更佳
- 饭前2-3小时进行呼吸热身
- 训练后进行呼吸放松
            """,
            "recommendations": [
                "✓ 训练前进行10分钟呼吸热身",
                "✓ 每周2-3次肺活量训练",
                "✓ 静态闭气训练（提升呼吸控制）",
                "✓ 注意：饮酒后第二天肺活量下降约200ml"
            ]
        })

        return insights

    def generate_pool_training_recommendations_md(self, readiness_score, recovery_index):
        """生成泳池训练建议"""

        # 根据准备度确定训练强度
        if readiness_score >= 85:
            training_intensity = "高强度"
            intensity_emoji = "🔥"
        elif readiness_score >= 70:
            training_intensity = "中等强度"
            intensity_emoji = "💪"
        else:
            training_intensity = "恢复训练"
            intensity_emoji = "🧘"

        md = f"""## 🏊 今日泳池训练建议

**训练类型：** 基础训练 + 1000米蛙泳
**训练强度：** {intensity_emoji} {training_intensity}
**准备度：** {readiness_score}/100 | **恢复指数：** {recovery_index}/100

---

### 🎯 今日训练目标

{f'''**状态评估：** 最佳状态！🔥
- ✅ 适合高强度基础训练
- ✅ 可以进行1000米测试
- ✅ 可以尝试突破PB
- ⚠️ 注意：保持配速稳定，避免前快后慢''' if readiness_score >= 85 else f'''**状态评估：** 训练状态 💪
- ✅ 适合常规基础训练
- ✅ 技术细节打磨
- ✓ 稳定配速训练
- 💡 建议：保持节奏，关注技术''' if readiness_score >= 70 else f'''**状态评估：** 恢复日 🧘
- ⚠️ 建议降低训练强度
- ✅ 适合技术训练
- ✅ 适合短距离练习
- 💡 重点：恢复、准备明日训练'''}

---

### 📋 完整训练计划

#### 阶段1：热身（15分钟）

**目标：** 激活身体，提高体温，准备训练

```
时间分配：
07:00 起床 + NMN22000 + 益生菌
07:30 轻度活动或休息
08:00 早餐（轻食，可选）
10:00 训练前加餐（香蕉1根 + MCT油 15ml）
10:30 到达泳池，开始热身
```

**热身内容：**
1. **陆上热身（5分钟）：**
   - 关节活动（肩、髋、膝、踝）
   - 动态拉伸（手臂绕环、腿摆动）
   - 呼吸练习（深呼吸10次）

2. **水中热身（10分钟）：**
   - 自由泳 200米（慢速，轻松游）
   - 水下慢爬 50米（最长时间，放松游）
   - 无蹼 3-5组 x 2分钟（关注动作质量，不追求距离）

**热身要点：**
- ✅ 心率逐渐提升（不要突然冲刺）
- ✅ 关注动作流畅性
- ✅ 呼吸节奏稳定
- ❌ 避免高强度爆发

---

#### 阶段2：基础训练（60-90分钟）

**四项基础训练轮换：**

---

**(a) 无蹼训练（No-Fin）**

**训练量：**
- 25米无蹼 x 4组
- 50米无蹼 x 3组
- 75米无蹼 x 2组
- 组间休息：2-3分钟

**技术要点：**
- ✅ **体位控制：** 保持水平流线型，头部位置正确
- ✅ **动作流畅度：** 划水连贯，推水充分
- ✅ **呼吸时机：** 转身呼吸，不要抬头
- ✅ **踢腿：** 小腿鞭打，膝盖微屈

**常见错误：**
- ❌ 头部抬高（增加阻力）
- ❌ 划水过快（效率低）
- ❌ 呼吸过早（破坏节奏）

**监控指标：**
- 心率：140-160bpm
- 划水次数：25米 ≤ 20次
- 休息期间：心率恢复到 <120bpm

---

**(b) 单蹼训练（Monofin）**

**训练量：**
- 50米单蹼 x 4组
- 75米单蹼 x 3组
- 组间休息：3-4分钟

**技术要点：**
- ✅ **蹬腿发力：** 髋部发力，大腿带动小腿
- ✅ **水下流线型：** 身体伸展，手臂并拢前伸
- ✅ **节奏配合：** 蹬腿-滑行-呼吸，连贯流畅
- ✅ **呼吸控制：** 水下完成蹬腿，出水吸气

**常见错误：**
- ❌ 膝盖过度弯曲（小腿蹬水）
- ❌ 身体摆动过大（浪费能量）
- ❌ 呼吸过早（破坏流线型）

**监控指标：**
- 心率：145-165bpm
- 50米时间：目标 ≤ 45秒
- 蹬腿次数：50米 ≤ 8次

---

**(c) 双蹼训练（Bifins）**

**训练量：**
- 50米双蹼 x 4组
- 75米双蹼 x 3组
- 组间休息：4-5分钟

**技术要点：**
- ✅ **节奏配合：** 双蹼同步，身体协调
- ✅ **效率优先：** 流畅游进，不追求速度
- ✅ **呼吸节奏：** 固定呼吸模式（如3蹬1呼吸）
- ✅ **放松技巧：** 利用浮力，减少体力消耗

**常见错误：**
- ❌ 蹬腿不同步（左右不平衡）
- ❌ 过度用力（疲劳快）
- ❌ 呼吸紊乱（节奏破坏）

**监控指标：**
- 心率：140-160bpm
- 75米时间：目标 ≤ 1分30秒
- 休息期间：充分放松

---

**(d) 静态闭气训练（Static Apnea）**

**训练量：**
- 干姿静态 2分钟 x 3组
- 组间休息：5分钟

**技术要点：**
- ✅ **呼吸控制：** 训练前深呼吸放松，闭气时保持节奏
- ✅ **心理素质：** 保持冷静，专注呼吸
- ✅ **身体放松：** 肌肉放松，减少耗氧
- ✅ **憋气时机：** 选择最佳时机（吸气后）

**常见错误：**
- ❌ 过度换气（危险！）
- ❌ 紧张僵硬（耗氧增加）
- ❌ 强行延长（危险！）

**监控指标：**
- 闭气时间：2分钟舒适
- 血氧饱和度：>95%（如有脉氧仪）
- 恢复时间：1分钟内恢复正常呼吸

**安全提醒：**
- ⚠️ 永远不要单独练习静态闭气
- ⚠️ 感到不适立即停止
- ⚠️ 循序渐进，不要强行

---

#### 阶段3：1000米蛙泳（核心训练）

**训练目标：**
- **目标配速：** 1:47-1:50/100m
- **目标时间：** 17分56秒（PB）
- **最大心率：** ≤170bpm
- **平均心率：** 145-150bpm

**训练方法：**

**方法1：分段训练（技术提升）**
```
4 x 250m 技术训练
- 每组配速：1:50-1:55/100m
- 组间休息：60秒
- 重点：关注技术，保持配速
- 记录：每组时间 + 心率
```

**方法2：全速测试（挑战PB）**
```
1 x 1000m 全速测试
- 前500m：配速1:47-1:48/100m
- 后500m：保持节奏，不减速
- 心率监控：140-160bpm（平均）
- 记录：总时间 + 平均心率
```

**方法3：负分段训练（节奏控制）**
```
10 x 100m 分段训练
- 第1-3个：1:50（控制起速）
- 第4-7个：1:47-1:48（稳定节奏）
- 第8-10个：1:45-1:46（冲刺）
- 休息：每个100m后休息30秒
```

**配速策略：**
- ✅ 前200米：稳定起速，不要冲刺（配速1:50）
- ✅ 中间400米：保持节奏，稳定呼吸（配速1:47-1:48）
- ✅ 最后400米：保持节奏，避免减速（配速1:47）
- ❌ 避免前快后慢（最常见的错误）

**技术要点：**
- ✅ 蹬腿：充分蹬腿，滑行
- ✅ 呼吸：规律呼吸，不要憋气
- ✅ 节奏：保持稳定节奏
- ✅ 放松：保持肌肉放松

**监控要点：**
- 心率：保持在140-160bpm
- 划水效率：每次蹬腿距离
- 休息期间：记录感受，分析数据

---

### 📊 基于历史数据的训练建议

#### 从游泳记录（2024.8-2025.9）分析：

**成绩优化关键：**

1. ✅ **装备检查很重要**
   - "表带带紧、耳机音量刚好"（2024.11.9备注）
   - 每次训练前必须检查
   - **装备清单：** 表带、耳机、泳镜、泳帽、单蹼/双蹼

2. ✅ **持续性是进步的基础**
   - 2024.9.4 → 2024.10.10 → 2024.10.12：连续3次PB
   - 2025.2.2 "大概休了3周，退步严重"
   - **教训：** 避免长时间中断训练
   - **建议：** 每周至少3-4次训练

3. ✅ **配速控制是关键**
   - PB配速：1:47/100m（2025.9.25）
   - 建议配速范围：1:45-1:50/100m
   - 保持稳定节奏，避免前快后慢
   - **策略：** 前500米稳定，后500米保持

4. ✅ **心率监控**
   - 平均心率：145-150bpm
   - 最高心率：≤170bpm
   - 保持在目标心率区间
   - **建议：** 使用心率表监控

5. ✅ **细节决定成败**
   - 热身充分（15分钟）
   - 装备检查（每次训练前）
   - 记录数据（时间、心率、感受）
   - 分析总结（找出问题）

#### 今日训练建议：

**基于准备度{readiness_score}/100 + 恢复指数{recovery_index}/100：**

{f'''**状态：** 🔥 最佳状态！
- ✅ 适合高强度基础训练
- ✅ 可以进行1000米测试
- ✅ 可以尝试突破PB
- 💡 建议：利用最佳状态，挑战PB

**训练计划：**
- **目标配速：** 1:47/100m
- **目标时间：** 17分56秒
- **最大心率：** ≤170bpm
- **策略：** 前500米稳定配速1:48，后500m保持节奏1:47
- **记录：** 详细记录每200米时间+心率，事后分析''' if readiness_score >= 85 else f'''**状态：** 💪 训练状态
- ✅ 适合常规基础训练
- ✅ 技术细节打磨
- ✓ 稳定配速训练
- 💡 建议：关注技术，保持节奏

**训练计划：**
- **目标配速：** 1:48-1:50/100m
- **目标时间：** 18分-18分30秒
- **最大心率：** ≤165bpm
- **策略：** 稳定配速，关注技术
- **记录：** 每250米记录时间+心率''' if readiness_score >= 70 else f'''**状态：** 🧘 恢复日
- ⚠️ 建议降低训练强度
- ✅ 适合技术训练
- ✅ 适合短距离练习
- 💡 重点：恢复、准备明日训练

**训练计划：**
- **训练内容：** 技术训练为主
- **距离：** 缩短到500-800米
- **配速：** 轻松，不追求速度
- **重点：** 动作流畅性、呼吸节奏
- **记录：** 记录感受，不记录时间'''}

---

### 🗓️ 周训练安排建议

**周一-周四：基础训练日**
- 四项基础训练轮换
- 技术细节打磨
- 1000米蛙泳（3-4次）
- **重点：** 持续性、技术提升

**周五：测试日**
- 1000米蛙泳测试
- 监控心率区间
- 记录详细数据
- **重点：** 挑战PB

**周末：积极恢复**
- 瑜伽、拉伸、按摩
- 轻度活动（散步、轻松游）
- 准备下周训练
- **重点：** 恢复、放松

---

### ⚠️ 注意事项

#### 训练日安排建议

**训练前准备：**
- ✅ 提前15分钟到达泳池
- ✅ 检查装备（表带、耳机、泳镜、蹼）
- ✅ 充分热身（陆上5分钟 + 水中10分钟）
- ✅ 训练前加餐（香蕉 + MCT油）

**训练中监控：**
- ✅ 每25分钟检查心率
- ✅ 每15分钟补充水分（250ml）
- ✅ 关注呼吸节奏
- ✅ 保持技术流畅

**训练后恢复：**
- ✅ 30分钟内补充蛋白质 + 快速碳水
- ✅ 拉伸放松10-15分钟
- ✅ 记录训练数据
- ✅ 冲温水浴（促进恢复）

#### 避免的错误

- ❌ **装备检查不仔细** - "表带带紧、耳机音量刚好"
- ❌ **配速不稳定** - 前快后慢，浪费体力
- ❌ **心率过高** - >170bpm，过度训练
- ❌ **训练中断** - 超过1周会明显退步
- ❌ **酒精影响** - 前一天晚上避免饮酒
- ❌ **热身不足** - 容易受伤，表现下降
- ❌ **强行训练** - 身体不适时降低强度

#### 安全提醒

- ⚠️ **静态闭气：** 永远不要单独练习
- ⚠️ **过度换气：** 绝对禁止
- ⚠️ **心率异常：** 立即停止训练
- ⚠️ **身体不适：** 降低强度或休息
- ⚠️ **泳池安全：** 注意周围环境

---

## 📈 预期效果与周期

**短期效果（1-2周）：**
- ✅ 技术动作流畅性提升
- ✅ 配速稳定性提高
- ✅ 心率控制改善

**中期效果（4-6周）：**
- ✅ 1000米成绩提升
- ✅ 平均心率下降
- ✅ 恢复速度加快

**长期效果（8-12周）：**
- ✅ **预期PB时间：** 17分50-17分55
- ✅ **提升空间：** 3-6秒
- ✅ **技术巩固：** 形成肌肉记忆

**关键因素：**
- ✅ 每周至少3-4次训练
- ✅ 持续性，避免中断
- ✅ 记录和分析数据
- ✅ 充分恢复和休息

---

## 📝 今日训练记录模板

```
日期：{self.today.strftime("%Y-%m-%d")}
训练类型：泳池训练（四项基础 + 1000米蛙泳）
准备度：{readiness_score}/100 | 恢复指数：{recovery_index}/100

【热身】（15分钟）
- 陆上热身：5分钟 ✓
- 自由泳200米：_____秒
- 水下慢爬50米：_____秒
- 无蹼2分钟：_____米

【基础训练】（60-90分钟）
(a) 无蹼：
  - 25米 x 4组：_____, ____, ____, ____ (秒)
  - 50米 x 3组：_____, ____, ____ (秒)
  - 心率：_____bpm

(b) 单蹼：
  - 50米 x 4组：_____, ____, ____, ____ (秒)
  - 75米 x 3组：_____, ____, ____ (秒)
  - 心率：_____bpm

(c) 双蹼：
  - 50米 x 4组：_____, ____, ____, ____ (秒)
  - 75米 x 3组：_____, ____, ____ (秒)
  - 心率：_____bpm

(d) 静态闭气：
  - 2分钟 x 3组：✓ 完成 / ✗ 未完成
  - 舒适度：_____/10

【1000米蛙泳】（核心训练）
- 总时间：_____分_____秒
- 配速：_____/100m
- 平均心率：_____bpm
- 最高心率：_____bpm
- 配速策略：前500m _____秒，后500m _____秒
- 感受：_____________________

【训练后】
- 拉伸放松：10分钟 ✓
- 蛋白质补充：30g ✓
- 训练总结：_____________________
```

---

*建议基于：*
- *个人训练记录分析（2024-2025）*
- *游泳训练最佳实践*
- *心率监控与运动表现研究*
- *运动营养学会（ISSN）指南*
"""

        return md

def main():
    advisor = TwoMealDietAdvisor()
    pool_advisor = PoolTrainingAdvisor()

    # 生成两餐计划
    diet_md = advisor.generate_two_meal_plan(86, "high", 12.5)
    print(diet_md)

    # 生成泳池训练建议
    pool_md = pool_advisor.generate_pool_training_recommendations_md(86, 100)
    print(pool_md)

    # 生成补剂清单
    supplement_md = advisor.generate_supplement_checklist()
    print(supplement_md)

if __name__ == "__main__":
    main()
