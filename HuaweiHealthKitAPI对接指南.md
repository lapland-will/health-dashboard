# åä¸ºHealth Kit APIå¯¹æ¥æŒ‡å—

**æ›´æ–°æ—¶é—´ï¼š** 2025-01-31
**ç›®æ ‡è®¾å¤‡ï¼š** åä¸ºWATCH Ultimate 2
**ç›®æ ‡ï¼š** æ•´åˆå¥åº·æ•°æ®åˆ°å¥åº·è®°å½•ç³»ç»Ÿ

---

## ğŸ“‹ å¯¹æ¥æ–¹å¼å¯¹æ¯”

| æ–¹å¼ | éš¾åº¦ | æ—¶é—´æˆæœ¬ | æ•°æ®å®Œæ•´åº¦ | æ¨èåº¦ |
|------|------|----------|------------|--------|
| **æ‰‹åŠ¨CSVå¯¼å‡º** | â­ ç®€å• | 5-10åˆ†é’Ÿ | 80% | âœ“â­â­â­â­â­ æ¨è |
| **Health Kit API** | â­â­â­â­â­ å›°éš¾ | 1-2å‘¨ | 100% | âš ï¸ éœ€ä¼ä¸šèµ„è´¨ |

---

## ğŸš€ æ–¹å¼ä¸€ï¼šæ‰‹åŠ¨CSVå¯¼å‡ºï¼ˆæ¨è - ç«‹å³å¯ç”¨ï¼‰

### ä¼˜åŠ¿
- âœ“ æ— éœ€å¼€å‘è€…è´¦å·
- âœ“ æ— éœ€ç¼–å†™ä»£ç 
- âœ“ ç«‹å³å¯è·å–æ•°æ®
- âœ“ æ”¯æŒæ‰€æœ‰å¥åº·æ•°æ®ç±»å‹

### å¯¼å‡ºæ­¥éª¤

#### 1. è¡€å‹æ•°æ®å¯¼å‡º
```
1. æ‰“å¼€åä¸ºè¿åŠ¨å¥åº·Appï¼ˆç¡®ä¿ç‰ˆæœ¬â‰¥16.0.12.300ï¼‰
2. è¿›å…¥"å¥åº·"é¡µé¢
3. ç‚¹å‡»"è¡€å‹"å¡ç‰‡
4. ç‚¹å‡»å³ä¸Šè§’"å¯¼å‡º"å›¾æ ‡ï¼ˆæˆ–"..."èœå•ï¼‰
5. é€‰æ‹©æ—¶é—´èŒƒå›´ï¼šè¿‡å»30å¤©
6. é€‰æ‹©å¯¼å‡ºæ ¼å¼ï¼šCSV
7. åˆ†äº«åˆ°å¤‡å¿˜å½•æˆ–é‚®ä»¶
8. ä¿å­˜åˆ°ï¼šPersonal/Health/HuaweiData/HealthData/
```

#### 2. å…¶ä»–å¥åº·æ•°æ®
```
1. æ‰“å¼€åä¸ºè¿åŠ¨å¥åº·App
2. è¿›å…¥"æˆ‘çš„"é¡µé¢
3. ç‚¹å‡»ä¸ªäººå¤´åƒ
4. è¿›å…¥"è´¦å·ä¸å®‰å…¨"æˆ–"éšç§ä¸­å¿ƒ"
5. é€‰æ‹©"æ•°æ®ç®¡ç†"æˆ–"è¯·æ±‚å‰¯æœ¬æ•°æ®"
6. å‹¾é€‰"è¿åŠ¨å¥åº·æœåŠ¡"
7. ç­‰å¾…é‚®ä»¶é€šçŸ¥ï¼ˆçº¦7å¤©ï¼‰
8. ä¸‹è½½å®Œæ•´æ•°æ®å‰¯æœ¬
```

#### 3. æ½œæ°´æ•°æ®å¯¼å‡º
```
1. æ‰“å¼€åä¸ºè¿åŠ¨å¥åº·App
2. è¿›å…¥"è¿åŠ¨"é¡µé¢
3. æ‰¾åˆ°æ½œæ°´è®°å½•
4. ç‚¹å‡»å…·ä½“æ½œæ°´è®°å½•
5. ç‚¹å‡»"åˆ†äº«"æˆ–"å¯¼å‡º"
6. ä¿å­˜åˆ°ï¼šPersonal/Health/HuaweiData/DiveLogs/
```

### æ•°æ®æ•´åˆ

å¯¼å‡ºæ•°æ®åï¼Œè¿è¡Œæ•´åˆè„šæœ¬ï¼š
```bash
cd ~/Desktop/AI/QuantTrading/QuantTrading/Personal/Health
python3 huawei_oura_integration.py
```

---

## ğŸ” æ–¹å¼äºŒï¼šHealth Kit APIå¯¹æ¥ï¼ˆéœ€ä¼ä¸šèµ„è´¨ï¼‰

### å‰ç½®è¦æ±‚

#### 1ï¸âƒ£ å¿…é¡»å…·å¤‡çš„æ¡ä»¶
- **ä¼ä¸šå¼€å‘è€…è´¦å·**ï¼ˆä¸ªäººè´¦å·æ— æ³•ç”³è¯·ï¼‰
- **ä¼ä¸šè¥ä¸šæ‰§ç…§**
- **AppGallery Connecté¡¹ç›®**
- **åº”ç”¨å®¡æ ¸é€šè¿‡**

#### 2ï¸âƒ£ æ³¨å†Œæµç¨‹

**æ­¥éª¤1ï¼šæ³¨å†Œåä¸ºå¼€å‘è€…è´¦å·**
```
1. è®¿é—®ï¼šhttps://developer.huawei.com/
2. ç‚¹å‡»"æ³¨å†Œ"
3. é€‰æ‹©"ä¼ä¸šå¼€å‘è€…"
4. å‡†å¤‡ææ–™ï¼š
   - ä¼ä¸šè¥ä¸šæ‰§ç…§
   - æ³•äººèº«ä»½è¯
   - ä¼ä¸šé‚®ç®±
   - è”ç³»ç”µè¯
5. æäº¤å®¡æ ¸ï¼ˆ1-3ä¸ªå·¥ä½œæ—¥ï¼‰
```

**æ­¥éª¤2ï¼šåˆ›å»ºåº”ç”¨**
```
1. ç™»å½•AppGallery Connectï¼šhttps://developer.huawei.com/consumer/cn/service/josp/agc/index.html
2. åˆ›å»ºæ–°é¡¹ç›®
3. åœ¨é¡¹ç›®ä¸­æ·»åŠ åº”ç”¨
4. é€‰æ‹©åº”ç”¨å¹³å°ï¼ˆAndroid/iOS/Webï¼‰
5. å¡«å†™åº”ç”¨ä¿¡æ¯
   - åº”ç”¨åç§°
   - åº”ç”¨åŒ…åï¼ˆå¦‚ï¼šcom.health.freedivingï¼‰
   - åº”ç”¨ç±»åˆ«ï¼šå¥åº·ä¸å¥èº«
```

**æ­¥éª¤3ï¼šå¼€é€šHealth KitæœåŠ¡**
```
1. è¿›å…¥é¡¹ç›®è®¾ç½®
2. é€‰æ‹©"APIç®¡ç†"
3. æ‰¾åˆ°"Health Kit"æˆ–"å¥åº·æœåŠ¡"
4. ç‚¹å‡»"å¼€é€šæœåŠ¡"
5. é˜…è¯»å¹¶åŒæ„æœåŠ¡åè®®
6. æäº¤å®¡æ ¸ï¼ˆéœ€è¦è¯´æ˜åº”ç”¨åœºæ™¯ï¼‰
```

**æ­¥éª¤4ï¼šç”³è¯·æ•°æ®æƒé™**
```
éœ€è¦ç”³è¯·çš„æ•°æ®æƒé™ï¼š
- HEALTH_CP_HEART_RATEï¼ˆå¿ƒç‡ï¼‰
- HEALTH_CP_BLOOD_PRESSUREï¼ˆè¡€å‹ï¼‰
- HEALTH_CP_SLEEPï¼ˆç¡çœ ï¼‰
- HEALTH_CP_STEP_COUNTï¼ˆæ­¥æ•°ï¼‰
- HEALTH_CP_CALORIEï¼ˆå¡è·¯é‡Œï¼‰
- HEALTH_CP_DISTANCEï¼ˆè·ç¦»ï¼‰

æ³¨æ„ï¼šæ•æ„Ÿæ•°æ®ï¼ˆå¦‚è¡€å‹ï¼‰éœ€è¦é¢å¤–å®¡æ ¸
```

**æ­¥éª¤5ï¼šç­‰å¾…å®¡æ ¸**
```
å®¡æ ¸æ—¶é—´ï¼š1-2å‘¨
å®¡æ ¸æ ‡å‡†ï¼š
- åº”ç”¨åœºæ™¯è¯´æ˜
- éšç§æ”¿ç­–
- æ•°æ®ä½¿ç”¨è¯´æ˜
- ç”¨æˆ·æˆæƒæµç¨‹
```

### APIå¯†é’¥å’Œå‡­è¯ç”Ÿæˆ

#### 1. è·å–Client IDå’ŒClient Secret
```
1. ç™»å½•AppGallery Connect
2. è¿›å…¥ä½ çš„é¡¹ç›®
3. é€‰æ‹©"æˆ‘çš„åº”ç”¨"
4. é€‰æ‹©"å¼€å‘" â†’ "é…ç½®"
5. æŸ¥çœ‹ä»¥ä¸‹ä¿¡æ¯ï¼š
   - Client ID
   - Client Secret
   - App ID
   - Package Name
```

#### 2. é…ç½®OAuth 2.0
```
æˆæƒæ¨¡å¼ï¼šAuthorization Code
æˆæƒç«¯ç‚¹ï¼šhttps://oauth-login.cloud.huawei.com/oauth2/v3/authorize
Tokenç«¯ç‚¹ï¼šhttps://oauth-login.cloud.huawei.com/oauth2/v3/token
```

#### 3. è®¾ç½®SHA256æŒ‡çº¹
```
1. ä½¿ç”¨keytoolç”ŸæˆSHA256æŒ‡çº¹ï¼š
   keytool -list -v -keystore your_keystore.jks

2. åœ¨AppGallery Connectä¸­æ·»åŠ SHA256æŒ‡çº¹
3. è¿™æ˜¯ä¸ºäº†éªŒè¯åº”ç”¨èº«ä»½
```

### è®¤è¯æµç¨‹

åä¸ºHealth Kitä½¿ç”¨OAuth 2.0æˆæƒç æ¨¡å¼ï¼š

#### 1. ç”¨æˆ·æˆæƒ
```python
# æ„å»ºæˆæƒURL
auth_url = (
    f"https://oauth-login.cloud.huawei.com/oauth2/v3/authorize"
    f"?client_id={CLIENT_ID}"
    f"&redirect_uri={REDIRECT_URI}"
    f"&response_type=code"
    f"&scope={SCOPES}"
    f"&state={random_state}"
)

# ç”¨æˆ·è®¿é—®æ­¤URLå¹¶æˆæƒ
# æˆæƒåä¼šè¢«é‡å®šå‘åˆ°redirect_uriï¼Œå¹¶æºå¸¦æˆæƒç 
```

#### 2. è·å–Access Token
```python
# ä½¿ç”¨æˆæƒç æ¢å–access token
token_url = "https://oauth-login.cloud.huawei.com/oauth2/v3/token"

data = {
    "grant_type": "authorization_code",
    "code": auth_code,
    "client_id": CLIENT_ID,
    "client_secret": CLIENT_SECRET,
    "redirect_uri": REDIRECT_URI
}

response = requests.post(token_url, data=data)
access_token = response.json()["access_token"]
refresh_token = response.json()["refresh_token"]
```

#### 3. åˆ·æ–°Tokenï¼ˆAccess Tokenæœ‰æ•ˆæœŸ1å°æ—¶ï¼‰
```python
# ä½¿ç”¨refresh_tokenåˆ·æ–°
data = {
    "grant_type": "refresh_token",
    "refresh_token": refresh_token,
    "client_id": CLIENT_ID,
    "client_secret": CLIENT_SECRET
}

response = requests.post(token_url, data=data)
new_access_token = response.json()["access_token"]
```

### APIè°ƒç”¨ç¤ºä¾‹

```python
#!/usr/bin/env python3
"""
åä¸ºHealth Kit APIè°ƒç”¨ç¤ºä¾‹
éœ€è¦å…ˆå®ŒæˆOAuth 2.0è®¤è¯
"""

import requests
import json
from datetime import datetime, timedelta

class HuaweiHealthKitAPI:
    def __init__(self, access_token):
        self.base_url = "https://health.huawei.com/cloud/hhi/api"
        self.access_token = access_token
        self.headers = {
            "Authorization": f"Bearer {access_token}",
            "Content-Type": "application/json"
        }

    def get_health_data(self, data_type, start_date, end_date):
        """
        è·å–å¥åº·æ•°æ®
        :param data_type: æ•°æ®ç±»å‹ï¼ˆå¦‚ï¼šHEALTH_CP_HEART_RATEï¼‰
        :param start_date: å¼€å§‹æ—¥æœŸ (YYYY-MM-DD)
        :param end_date: ç»“æŸæ—¥æœŸ (YYYY-MM-DD)
        """
        url = f"{self.base_url}/healthdata/data/query"

        payload = {
            "dataType": data_type,
            "startTime": f"{start_date}T00:00:00Z",
            "endTime": f"{end_date}T23:59:59Z",
            "pageIndex": 1,
            "pageSize": 1000
        }

        response = requests.post(url, headers=self.headers, json=payload)
        return response.json()

    def get_blood_pressure(self, days=30):
        """è·å–è¡€å‹æ•°æ®"""
        end_date = datetime.now()
        start_date = end_date - timedelta(days=days)

        return self.get_health_data(
            data_type="HEALTH_CP_BLOOD_PRESSURE",
            start_date=start_date.strftime("%Y-%m-%d"),
            end_date=end_date.strftime("%Y-%m-%d")
        )

    def get_heart_rate(self, days=30):
        """è·å–å¿ƒç‡æ•°æ®"""
        end_date = datetime.now()
        start_date = end_date - timedelta(days=days)

        return self.get_health_data(
            data_type="HEALTH_CP_HEART_RATE",
            start_date=start_date.strftime("%Y-%m-%d"),
            end_date=end_date.strftime("%Y-%m-%d")
        )

    def get_sleep_data(self, days=30):
        """è·å–ç¡çœ æ•°æ®"""
        end_date = datetime.now()
        start_date = end_date - timedelta(days=days)

        return self.get_health_data(
            data_type="HEALTH_CP_SLEEP",
            start_date=start_date.strftime("%Y-%m-%d"),
            end_date=end_date.strftime("%Y-%m-%d")
        )

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == "__main__":
    # ä»OAuth 2.0æµç¨‹è·å–çš„access_token
    ACCESS_TOKEN = "your_access_token_here"

    api = HuaweiHealthKitAPI(ACCESS_TOKEN)

    # è·å–è¡€å‹æ•°æ®
    bp_data = api.get_blood_pressure(days=30)
    print("è¡€å‹æ•°æ®ï¼š", json.dumps(bp_data, indent=2, ensure_ascii=False))

    # è·å–å¿ƒç‡æ•°æ®
    hr_data = api.get_heart_rate(days=30)
    print("å¿ƒç‡æ•°æ®ï¼š", json.dumps(hr_data, indent=2, ensure_ascii=False))
```

### å®Œæ•´å¯¹æ¥è„šæœ¬

åˆ›å»ºæ–‡ä»¶ï¼š`huawei_healthkit_api.py`

```python
#!/usr/bin/env python3
"""
åä¸ºHealth Kit APIå®Œæ•´å¯¹æ¥è„šæœ¬
åŒ…å«OAuth 2.0è®¤è¯å’Œæ•°æ®è·å–
"""

import requests
import json
import secrets
import webbrowser
from http.server import HTTPServer, BaseHTTPRequestHandler
from pathlib import Path
from datetime import datetime, timedelta

# é…ç½®ä¿¡æ¯ï¼ˆéœ€è¦åœ¨AppGallery Connectè·å–ï¼‰
CLIENT_ID = "your_client_id_here"
CLIENT_SECRET = "your_client_secret_here"
REDIRECT_URI = "http://localhost:8000/callback"
SCOPE = "openid https://www.huawei.com/healthkit/healthdata.read"

class HuaweiAuthHandler(BaseHTTPRequestHandler):
    """å¤„ç†OAuthå›è°ƒ"""

    def do_GET(self):
        if self.path.startswith("/callback"):
            # è§£ææˆæƒç 
            query = self.path.split("?", 1)[1]
            params = dict(param.split("=") for param in query.split("&"))
            auth_code = params.get("code")

            # è¿”å›æˆæƒæˆåŠŸé¡µé¢
            self.send_response(200)
            self.send_header("Content-type", "text/html")
            self.end_headers()
            self.wfile.write(b"<h1>Authorization Successful! You can close this window.</h1>")

            # ä¿å­˜æˆæƒç 
            with open("huawei_auth_code.txt", "w") as f:
                f.write(auth_code)

            print(f"\nâœ“ æˆæƒç å·²ä¿å­˜: {auth_code}")

class HuaweiHealthKitIntegrator:
    """åä¸ºHealth Kitæ•´åˆå™¨"""

    def __init__(self):
        self.auth_url = "https://oauth-login.cloud.huawei.com/oauth2/v3/authorize"
        self.token_url = "https://oauth-login.cloud.huawei.com/oauth2/v3/token"
        self.api_url = "https://health.huawei.com/cloud/hhi/api"
        self.access_token = None
        self.refresh_token = None

    def authorize(self):
        """æ­¥éª¤1ï¼šå‘èµ·ç”¨æˆ·æˆæƒ"""
        state = secrets.token_urlsafe(16)

        auth_params = {
            "client_id": CLIENT_ID,
            "redirect_uri": REDIRECT_URI,
            "response_type": "code",
            "scope": SCOPE,
            "state": state
        }

        auth_url = f"{self.auth_url}?{self._encode_params(auth_params)}"

        print("=" * 60)
        print("åä¸ºHealth Kitæˆæƒ")
        print("=" * 60)
        print(f"\nè¯·åœ¨æµè§ˆå™¨ä¸­å®Œæˆæˆæƒï¼š\n")
        print(f"{auth_url}\n")
        print("ç­‰å¾…æˆæƒå›è°ƒ...")

        # å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨æ¥æ”¶å›è°ƒ
        webbrowser.open(auth_url)
        self._start_callback_server()

    def _start_callback_server(self):
        """å¯åŠ¨å›è°ƒæœåŠ¡å™¨"""
        server = HTTPServer(("localhost", 8000), HuaweiAuthHandler)
        server.handle_request()

    def get_access_token(self, auth_code):
        """æ­¥éª¤2ï¼šä½¿ç”¨æˆæƒç è·å–access token"""
        data = {
            "grant_type": "authorization_code",
            "code": auth_code,
            "client_id": CLIENT_ID,
            "client_secret": CLIENT_SECRET,
            "redirect_uri": REDIRECT_URI
        }

        response = requests.post(self.token_url, data=data)
        result = response.json()

        if "access_token" in result:
            self.access_token = result["access_token"]
            self.refresh_token = result["refresh_token"]

            # ä¿å­˜å‡­è¯
            credentials = {
                "access_token": self.access_token,
                "refresh_token": self.refresh_token,
                "expires_at": (datetime.now() + timedelta(hours=1)).isoformat()
            }

            with open("huawei_credentials.json", "w") as f:
                json.dump(credentials, f, indent=2)

            print("âœ“ Access Tokenè·å–æˆåŠŸ")
            print(f"âœ“ å‡­è¯å·²ä¿å­˜åˆ° huawei_credentials.json")

            return True
        else:
            print("âŒ è·å–Access Tokenå¤±è´¥ï¼š")
            print(json.dumps(result, indent=2))
            return False

    def refresh_access_token(self):
        """åˆ·æ–°access token"""
        # ä»æ–‡ä»¶è¯»å–refresh_token
        try:
            with open("huawei_credentials.json", "r") as f:
                credentials = json.load(f)
                refresh_token = credentials["refresh_token"]
        except:
            print("âŒ æœªæ‰¾åˆ°refresh_tokenï¼Œéœ€è¦é‡æ–°æˆæƒ")
            return False

        data = {
            "grant_type": "refresh_token",
            "refresh_token": refresh_token,
            "client_id": CLIENT_ID,
            "client_secret": CLIENT_SECRET
        }

        response = requests.post(self.token_url, data=data)
        result = response.json()

        if "access_token" in result:
            self.access_token = result["access_token"]
            print("âœ“ Access Tokenåˆ·æ–°æˆåŠŸ")
            return True
        else:
            print("âŒ åˆ·æ–°å¤±è´¥ï¼š", result)
            return False

    def sync_data(self, days=30):
        """åŒæ­¥å¥åº·æ•°æ®"""
        if not self.access_token:
            print("âŒ è¯·å…ˆå®Œæˆæˆæƒ")
            return

        headers = {
            "Authorization": f"Bearer {self.access_token}",
            "Content-Type": "application/json"
        }

        end_date = datetime.now()
        start_date = end_date - timedelta(days=days)

        # è·å–å„ç±»å¥åº·æ•°æ®
        data_types = [
            ("HEALTH_CP_HEART_RATE", "å¿ƒç‡"),
            ("HEALTH_CP_BLOOD_PRESSURE", "è¡€å‹"),
            ("HEALTH_CP_SLEEP", "ç¡çœ "),
            ("HEALTH_CP_STEP_COUNT", "æ­¥æ•°")
        ]

        all_data = {}

        for data_type, name in data_types:
            print(f"\nè·å–{name}æ•°æ®...")

            payload = {
                "dataType": data_type,
                "startTime": f"{start_date.strftime('%Y-%m-%d')}T00:00:00Z",
                "endTime": f"{end_date.strftime('%Y-%m-%d')}T23:59:59Z",
                "pageIndex": 1,
                "pageSize": 1000
            }

            response = requests.post(
                f"{self.api_url}/healthdata/data/query",
                headers=headers,
                json=payload
            )

            if response.status_code == 200:
                data = response.json()
                all_data[name] = data
                print(f"âœ“ {name}æ•°æ®è·å–æˆåŠŸ")

                # ä¿å­˜åˆ°æ–‡ä»¶
                output_file = Path("Personal/Health/HuaweiData/HealthData") / f"{name}_{datetime.now().strftime('%Y%m%d')}.json"
                output_file.parent.mkdir(parents=True, exist_ok=True)

                with open(output_file, "w", encoding="utf-8") as f:
                    json.dump(data, f, indent=2, ensure_ascii=False)

                print(f"âœ“ å·²ä¿å­˜åˆ° {output_file}")
            else:
                print(f"âŒ {name}æ•°æ®è·å–å¤±è´¥ï¼š{response.status_code}")
                print(response.text)

        return all_data

def main():
    """ä¸»å‡½æ•°"""
    integrator = HuaweiHealthKitIntegrator()

    print("åä¸ºHealth Kit APIå¯¹æ¥å·¥å…·")
    print("=" * 60)

    # æ£€æŸ¥æ˜¯å¦å·²æœ‰å‡­è¯
    if Path("huawei_credentials.json").exists():
        print("å‘ç°å·²æœ‰å‡­è¯æ–‡ä»¶")

        with open("huawei_credentials.json", "r") as f:
            credentials = json.load(f)
            expires_at = datetime.fromisoformat(credentials["expires_at"])

        if datetime.now() < expires_at:
            print("âœ“ Access Tokenä»ç„¶æœ‰æ•ˆ")
            integrator.access_token = credentials["access_token"]
        else:
            print("âš ï¸ Access Tokenå·²è¿‡æœŸï¼Œæ­£åœ¨åˆ·æ–°...")
            if integrator.refresh_access_token():
                integrator.access_token = credentials["access_token"]
    else:
        print("\néœ€è¦å®ŒæˆOAuth 2.0æˆæƒ")
        print("è¯·ç¡®ä¿ä»¥ä¸‹ä¿¡æ¯å·²é…ç½®ï¼š")
        print(f"  Client ID: {CLIENT_ID}")
        print(f"  Redirect URI: {REDIRECT_URI}\n")

        # æ­¥éª¤1ï¼šå‘èµ·æˆæƒ
        integrator.authorize()

        # æ­¥éª¤2ï¼šè·å–access token
        try:
            with open("huawei_auth_code.txt", "r") as f:
                auth_code = f.read().strip()

            if integrator.get_access_token(auth_code):
                print("\nâœ“ æˆæƒæˆåŠŸï¼")
            else:
                print("\nâŒ æˆæƒå¤±è´¥")
                return
        except:
            print("\nâŒ æœªæ‰¾åˆ°æˆæƒç æ–‡ä»¶")
            return

    # æ­¥éª¤3ï¼šåŒæ­¥æ•°æ®
    print("\n" + "=" * 60)
    print("å¼€å§‹åŒæ­¥å¥åº·æ•°æ®")
    print("=" * 60)

    data = integrator.sync_data(days=30)

    print("\n" + "=" * 60)
    print("âœ“ æ•°æ®åŒæ­¥å®Œæˆï¼")
    print("=" * 60)

if __name__ == "__main__":
    main()
```

---

## ğŸ”§ é…ç½®æ­¥éª¤æ€»ç»“

### APIå¯¹æ¥æ‰€éœ€æ–‡ä»¶
1. **huawei_healthkit_api.py** - å®Œæ•´çš„APIå¯¹æ¥è„šæœ¬
2. **huawei_credentials.json** - å­˜å‚¨OAuthå‡­è¯ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
3. **huawei_auth_code.txt** - ä¸´æ—¶å­˜å‚¨æˆæƒç ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰

### éœ€è¦åœ¨AppGallery Connectè·å–çš„ä¿¡æ¯
- Client ID
- Client Secret
- App ID
- Package Nameï¼ˆå¦‚éœ€è¦ï¼‰
- SHA256æŒ‡çº¹ï¼ˆç”¨äºAndroidåº”ç”¨ï¼‰

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### å®¡æ ¸è¦æ±‚
1. **åº”ç”¨åœºæ™¯è¯´æ˜**ï¼šå¿…é¡»è¯¦ç»†è¯´æ˜å¦‚ä½•ä½¿ç”¨å¥åº·æ•°æ®
2. **éšç§æ”¿ç­–**ï¼šå¿…é¡»æœ‰å®Œæ•´çš„éšç§æ”¿ç­–è¯´æ˜æ•°æ®å¤„ç†æ–¹å¼
3. **ç”¨æˆ·æˆæƒ**ï¼šå¿…é¡»æ˜ç¡®å‘ŠçŸ¥ç”¨æˆ·å“ªäº›æ•°æ®ä¼šè¢«æ”¶é›†
4. **æ•°æ®å®‰å…¨**ï¼šå¿…é¡»è¯´æ˜å¦‚ä½•ä¿æŠ¤ç”¨æˆ·æ•°æ®å®‰å…¨

### APIé™åˆ¶
1. **è°ƒç”¨é¢‘ç‡é™åˆ¶**ï¼šæ¯åˆ†é’Ÿæœ€å¤š600æ¬¡è¯·æ±‚
2. **æ•°æ®é‡é™åˆ¶**ï¼šå•æ¬¡æŸ¥è¯¢æœ€å¤šè¿”å›1000æ¡è®°å½•
3. **æ—¶é—´èŒƒå›´é™åˆ¶**ï¼šå•æ¬¡æŸ¥è¯¢æ—¶é—´è·¨åº¦ä¸èƒ½è¶…è¿‡90å¤©
4. **Access Tokenæœ‰æ•ˆæœŸ**ï¼š1å°æ—¶ï¼Œéœ€è¦ä½¿ç”¨refresh_tokenåˆ·æ–°

### è´¹ç”¨
- å¼€å‘è€…è´¦å·ï¼šå…è´¹
- APIè°ƒç”¨ï¼šå…è´¹ï¼ˆéœ€å®¡æ ¸é€šè¿‡ï¼‰
- ä¼ä¸šè®¤è¯ï¼šå¯èƒ½éœ€è¦è´¹ç”¨

---

## ğŸ“Š æ•°æ®å¯¹æ¯”

| æ•°æ®ç±»å‹ | Oura Ring | åä¸ºHealth Kit | äº’è¡¥æ€§ |
|----------|-----------|----------------|--------|
| HRV | âœ“ è¯¦ç»† | âœ“ åŸºç¡€ | Ouraæ›´å‡†ç¡® |
| ç¡çœ  | âœ“ è¯¦ç»†åˆ†æœŸ | âœ“ åŸºç¡€åˆ†æœŸ | Ouraæ›´è¯¦ç»† |
| å¿ƒç‡ | âœ“ é‡‡æ ·ç‡ä½ | âœ“ è¿ç»­ç›‘æµ‹ | åä¸ºè¿ç»­æ€§æ›´å¥½ |
| è¡€å‹ | âœ— ä¸æ”¯æŒ | âœ“ æ”¯æŒ | åä¸ºç‹¬æœ‰ |
| æ½œæ°´ | âœ— ä¸æ”¯æŒ | âœ“ æ·±åº¦ã€æ—¶é•¿ | åä¸ºç‹¬æœ‰ |

---

## ğŸ¯ æ¨èæ–¹æ¡ˆ

### å¯¹äºä¸ªäººç”¨æˆ·ï¼ˆå¦‚é‡‘æ˜ï¼‰
**æ¨èï¼šæ‰‹åŠ¨CSVå¯¼å‡º**

ç†ç”±ï¼š
- æ— éœ€ç­‰å¾…1-2å‘¨å®¡æ ¸
- æ— éœ€ä¼ä¸šèµ„è´¨
- ç«‹å³å¯ç”¨
- æ•°æ®å®Œæ•´åº¦80%ï¼Œè¶³å¤Ÿä¸ªäººåˆ†æ

### å¯¹äºä¼ä¸šåº”ç”¨
**æ¨èï¼šHealth Kit API**

ç†ç”±ï¼š
- æ•°æ®100%å®Œæ•´
- è‡ªåŠ¨åŒ–æ•°æ®åŒæ­¥
- å¯æ•´åˆåˆ°äº§å“ä¸­
- é€‚åˆä¸ºç”¨æˆ·æä¾›æœåŠ¡

---

## ğŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### æ–¹å¼Aï¼šæ‰‹åŠ¨å¯¼å‡ºï¼ˆæ¨èï¼‰
1. æŒ‰ç…§ä¸Šè¿°æ­¥éª¤å¯¼å‡ºåä¸ºå¥åº·æ•°æ®
2. ä¿å­˜åˆ° `Personal/Health/HuaweiData/HealthData/`
3. è¿è¡Œæ•´åˆè„šæœ¬ï¼š
   ```bash
   python3 huawei_oura_integration.py
   ```

### æ–¹å¼Bï¼šç”³è¯·APIæ¥å…¥
1. ç¡®è®¤æ˜¯å¦æœ‰ä¼ä¸šå¼€å‘è€…è´¦å·
2. å¦‚æœ‰ï¼Œç»§ç»­æŒ‰APIå¯¹æ¥æµç¨‹æ“ä½œ
3. å¦‚æ— ï¼Œå»ºè®®å…ˆä½¿ç”¨æ‰‹åŠ¨å¯¼å‡ºï¼Œåç»­å†ç”³è¯·ä¼ä¸šè´¦å·

---

*æ–‡æ¡£ç‰ˆæœ¬ï¼šv1.0*
*æœ€åæ›´æ–°ï¼š2025-01-31*
*è”ç³»æ–¹å¼ï¼šé€šè¿‡GitHub Issuesåé¦ˆé—®é¢˜*
