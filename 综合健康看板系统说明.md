# 金明 - 全面健康看板系统说明

**设置完成时间：** 2025-02-03
**用户：** 金明 - 自由潜水世界纪录保持者
**自动发送时间：** 每天上午11点

---

## 🎯 系统功能

### 每日自动生成

每天上午11点自动生成包含以下内容的综合健康看板：

#### 1. 📊 健康数据（Oura Ring）
- **准备度** - 综合评估，包含HRV平衡、恢复指数、静息心率等
- **睡眠质量** - 总时长、深度睡眠、REM、睡眠效率、平均心率
- **活动数据** - 步数、卡路里消耗、距离

#### 2. 🌤️ 天气信息
- 当前温度、体感温度
- 湿度、风速、紫外线指数
- 今日最高/最低温度
- 降雨概率
- 日出/日落时间

#### 3. 👔 穿着建议
基于天气自动生成：
- 温度建议（寒冷/较冷/适中/舒适/炎热）
- 体感温度调整
- 湿度建议
- 风速建议
- 雨天建议
- 运动建议（户外/室内）

#### 4. 🌬️ 空气质量
- **AQI指数** - 空气质量指数
- **PM2.5 / PM10** - 颗粒物浓度
- **O₃ / NO₂ / SO₂** - 污染物指标
- **健康建议** - 基于AQI的运动建议

#### 5. 🎯 训练建议
综合评估后生成：
- 基于准备度的强度建议（高强度/中等/低强度/休息）
- 基于HRV的疲劳提醒
- 基于天气的室内/室外建议
- 基于空气质量的户外运动建议

#### 6. 💊 补剂提醒
- **异维A酸** - 隔日疗法提醒（偶数日）
- **日常补剂** - NMN、益生菌、鱼油、维生素D3、镁
- **训练日补剂** - 肌酸（根据活动数据）

---

## 📁 文件位置

### 核心脚本
```
Personal/Health/
├── comprehensive_health_dashboard.py  # 综合看板生成器
├── daily_oura_report.sh              # 每日报告主脚本
└── setup_daily_report.sh             # 定时任务设置（已执行）
```

### 每日报告
```
Personal/Health/DailyReports/
├── dashboard_2026-02-03.html  # HTML看板（推荐）
├── dashboard_2026-02-03.md    # Markdown报告
└── dashboard_2026-02-03.json  # JSON数据
```

---

## 🚀 如何查看报告

### 方式1：HTML看板（推荐）⭐

在浏览器中打开：
```bash
open /Users/williamjoy/Desktop/AI/QuantTrading/QuantTrading/Personal/Health/DailyReports/dashboard_2026-02-03.html
```

或直接双击HTML文件。

**优势：**
- ✓ 美观的可视化界面
- ✓ 响应式设计
- ✓ 颜色编码（绿/黄/橙/红）
- ✓ 实时数据展示

### 方式2：Markdown报告

在Obsidian或任何Markdown编辑器中打开：
```
Personal/Health/DailyReports/dashboard_2026-02-03.md
```

### 方式3：终端显示

每天上午11点自动在终端显示。

---

## 📊 今日健康报告摘要（2026-02-03）

### 健康评分

| 指标 | 分数 | 状态 |
|------|------|------|
| **准备度** | 77/100 | ✓ 良好 |
| **睡眠质量** | 80/100 | ✓ 良好 |
| **活动数据** | 90/100 | ⭐ 优秀 |

### 关键指标

- **HRV平衡：** 75/100 ✓
- **恢复指数：** 29/100 ⚠️ 偏低
- **睡眠平衡：** 100/100 ⭐
- **步数：** 1,076步

### 训练建议

**💪 中等强度训练**
- 准备度77/100，状态良好
- ⚠️ 恢复指数偏低，注意休息和睡眠质量

### 补剂提醒

**今日非服药日（2月3日奇数日）**
- ☐ 异维A酸 10mg
- ☑ NMN22000、益生菌、鱼油、维生素D3、镁
- ☑ 肌酸 3g（今日有活动）

---

## ⚙️ 配置选项

### 修改城市位置

编辑 `comprehensive_health_dashboard.py`:

```python
# 第27行左右
CITY = "Shanghai"  # 改为您的城市，如 "Beijing", "Shenzhen"
```

### 修改发送时间

1. 删除现有定时任务：
```bash
crontab -l | grep -v "daily_oura_report" | crontab -
```

2. 编辑 `setup_daily_report.sh` 中的时间：
```bash
# 当前：每天上午11点
CRON_JOB="0 11 * * * ..."

# 改为上午9点：
CRON_JOB="0 9 * * * ..."
```

3. 重新运行：
```bash
./setup_daily_report.sh
```

### 自动在浏览器中打开

编辑 `daily_oura_report.sh`，取消注释第57-59行：
```bash
if [[ "$OSTYPE" == "darwin"* ]]; then
    open "$REPORT_HTML"
fi
```

---

## 🔧 手动测试

### 立即生成今日报告

```bash
cd /Users/williamjoy/Desktop/AI/QuantTrading/QuantTrading/Personal/Health
./daily_oura_report.sh
```

### 仅生成看板（不运行完整脚本）

```bash
cd /Users/williamjoy/Desktop/AI/QuantTrading/QuantTrading/Personal/Health
python3 comprehensive_health_dashboard.py
```

### 查看定时任务

```bash
crontab -l
```

### 查看运行日志

```bash
tail -f /Users/williamjoy/Desktop/AI/QuantTrading/QuantTrading/Personal/Health/cron.log
```

---

## 📱 HTML看板功能

### 界面特点

- **渐变背景** - 紫色渐变，美观舒适
- **卡片式布局** - 信息清晰分类
- **响应式设计** - 自适应各种屏幕尺寸
- **颜色编码**：
  - 🟢 绿色 - 优秀 (85+)
  - 🔵 蓝色 - 良好 (70-84)
  - 🟡 黄色 - 一般 (55-69)
  - 🔴 红色 - 不佳 (<55)

### 包含的卡片

1. **准备度卡片** - 大分数显示 + 详细指标
2. **睡眠卡片** - 睡眠评分 + 睡眠阶段分布
3. **活动卡片** - 步数、卡路里、距离
4. **天气卡片** - 当前天气 + 详细指标
5. **空气质量卡片** - AQI颜色编码 + 污染物
6. **穿着建议卡片** - 基于天气的建议
7. **训练建议卡片** - 综合建议（大卡片）
8. **补剂提醒卡片** - 每日清单（大卡片）

---

## 🌐 数据来源

| 数据 | 来源 | 更新频率 |
|------|------|----------|
| 健康数据 | Oura Ring Gen 3 API | 实时 |
| 天气数据 | wttr.in API | 每小时 |
| 空气质量 | WAQI API | 每小时 |

---

## ❓ 常见问题

### Q1: 天气和空气质量数据获取失败？

**A:** 这可能是网络问题：
- wttr.in 或 waqi.info 服务器可能暂时不可用
- 网络连接可能不稳定
- 明天上午11点会自动重试

健康数据（Oura Ring）不受影响。

### Q2: 如何停止每日报告？

```bash
crontab -l | grep -v "daily_oura_report" | crontab -
```

### Q3: 如何重新设置？

```bash
cd /Users/williamjoy/Desktop/AI/QuantTrading/QuantTrading/Personal/Health
./setup_daily_report.sh
```

### Q4: 如何添加邮件发送？

在 `daily_oura_report.sh` 中添加：

```bash
# 设置邮箱
EMAIL="your-email@example.com"

# 发送邮件（需要先配置mail命令）
cat "$REPORT_MD" | mail -s "金明 - 今日健康报告 ($TODAY)" "$EMAIL"
```

---

## 📋 明天上午11点

系统会自动：
1. ✓ 同步Oura Ring数据
2. ✓ 获取天气和空气质量
3. ✓ 生成综合健康看板
4. ✓ 保存HTML、Markdown、JSON三种格式
5. ✓ 在终端显示报告摘要
6. ✓ 基于数据提供训练建议
7. ✓ 提供穿着和户外运动建议

---

## 🎉 总结

✅ **系统已完全配置**

从明天开始，每天上午11点您将收到：
- 📊 完整的健康数据看板
- 🌤️ 天气信息和穿着建议
- 🌬️ 空气质量指数和建议
- 🎯 针对自由潜水的训练建议
- 💊 完整的补剂提醒

**所有数据都会保存在：**
```
Personal/Health/DailyReports/
```

**推荐查看方式：**
在浏览器中打开HTML文件，获得最佳视觉体验。

---

*系统创建时间：2025-02-03*
*首次自动运行：明天上午11:00*
*数据来源：Oura Ring + 天气API + 空气质量API*
